!function(a){var b={margin:5,minScrollBarSize:50,init:!1},c=function(a,c,d){this.realScrollable=a,this.fakeScrollable=c,this.currentPos=0,this.initiated=!1,d=d||{},this.options={};for(var e in b)b.hasOwnProperty(e)&&(this.options[e]=e in d?d[e]:b[e]);this._createElements(),this._bindEvents(),this.options.init&&this.refreshDimensions()};c.prototype={constructor:c,refreshDimensions:function(){this._calculateDimensions(),this.handlingArea.style.height=Math.round(this.scrollHeight)+"px";var a=this.margin+this.relation*this.realScrollable.scrollTop;if(this._setScrollbar(a),!this.initiated){this.initiated=!0;var b=this;setTimeout(function(){b.scrollBar.className="meow-bar initiated"},0)}},_createElements:function(){this.actualBarElement=document.createElement("div"),this.handlingArea=document.createElement("div"),this.handlingArea.appendChild(this.actualBarElement),this.scrollBar=document.createElement("div"),this.scrollBar.className="meow-bar",this.scrollBar.appendChild(this.handlingArea),this.fakeScrollable.style.position="relative",this.fakeScrollable.appendChild(this.scrollBar)},_calculateDimensions:function(){var a=this.realScrollable.scrollHeight,b=c.connector.elementHeight(this.fakeScrollable),d=b-2*this.options.margin,e=d/a,f=0;a>b&&(f=e*d),this.scrollHeight=Math.max(this.options.minScrollBarSize,f),this.viewportHeight=d;var g=this.viewportHeight+f-this.scrollHeight;this.relation=g/a,this.margin=this.options.margin+c.connector.topMargin(this.fakeScrollable)},_handleDrag:function(a){var b=this,d=a.clientY;this._mousemoveHandler=function(a){b._incrementScroll(a.clientY-d),b._updateScroll(),d=a.clientY},c.connector.bindEvent(document,"mousemove",this._mousemoveHandler)},_stopDrag:function(){this._mousemoveHandler&&(c.connector.unbindEvent(document,"mousemove",this._mousemoveHandler),this._mousemoveHandler=null),this.mouseupHandler&&(c.connector.unbindEvent(document,"mouseup",this.mouseupHandler),this.mouseupHandler=null)},_updateScroll:function(){var a=(this.currentPos-this.margin)/this.relation;this.realScrollable.scrollTop=a},_setScrollbar:function(a){a=Math.max(this.margin,Math.min(this.viewportHeight-this.scrollHeight+this.margin,a)),this.currentPos=a,this.handlingArea.style.top=Math.round(a)+"px",this.handlingArea.style.display=this.relation>=1?"none":"block"},_incrementScroll:function(a){this._setScrollbar(this.currentPos+a)},_bindEvents:function(){var a=this;a.scrollHandler=function(){var b=a.margin+a.relation*a.realScrollable.scrollTop;a._setScrollbar(b)},a.mousedownHandler=function(b){3!==b.which&&2!==b.button&&(c.connector.preventDefault(b),a._stopDrag(),a._handleDrag(b),a.mouseupHandler=function(b){c.connector.preventDefault(b),a._stopDrag()},c.connector.bindEvent(document,"mouseup",a.mouseupHandler))},c.connector.bindEvent(this.realScrollable,"scroll",a.scrollHandler),c.connector.bindEvent(this.scrollBar,"mousedown",a.mousedownHandler)},clearEvents:function(){this.realScrollable&&this.scrollHandler&&c.connector.unbindEvent(this.realScrollable,"scroll",this.scrollHandler),this.scrollBar&&this.mousedownHandler&&c.connector.unbindEvent(this.scrollBar,"mousedown",this.mousedownHandler),this._stopDrag()}},a.MeowBar=c}(this),function(){var a=function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):a};MeowBar.connector={bindEvent:function(a,b,c){a.addEventListener(b,c,!1)},unbindEvent:function(a,b,c){a.removeEventListener(b,c,!1)},preventDefault:function(a){a.preventDefault()},elementHeight:function(b){var c=MeowBar.connector.topMargin(b),d=parseInt(a("borderBottomWidth"),10),e=parseInt(a("marginBottom"),10);return b.offsetHeight-(c+d+e)},topMargin:function(){return parseInt(a("borderTopWidth"),10)+parseInt(a("marginTop"),10)}}}(this);