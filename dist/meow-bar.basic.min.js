!function(a){var b={margin:5,minScrollBarSize:50},c=function(a,c,d){this.realScrollable=a,this.fakeScrollable=c,this.currentPos=0,this.initiated=!1,d=d||{},this.options={};for(var e in b)b.hasOwnProperty(e)&&(this.options[e]=d[e]||b[e]);this.createElements(),this.bindEvents()};c.prototype={constructor:c,createElements:function(){this.actualBarElement=document.createElement("div"),this.handlingArea=document.createElement("div"),this.handlingArea.appendChild(this.actualBarElement),this.scrollBar=document.createElement("div"),this.scrollBar.className="meow-bar",this.scrollBar.appendChild(this.handlingArea),this.fakeScrollable.appendChild(this.scrollBar)},refreshDimensions:function(){this.calculateDimensions(),this.handlingArea.style.height=Math.round(this.scrollHeight)+"px";var a=this.margin+this.relation*this.realScrollable.scrollTop;if(this.setScrollbar(a),!this.initiated){this.initiated=!0;var b=this;setTimeout(function(){b.scrollBar.className="meow-bar initiated"},0)}},calculateDimensions:function(){var a=this.realScrollable.scrollHeight,b=c.connector.elementHeight(this.fakeScrollable),d=b-2*this.options.margin,e=d/a,f=0;a>b&&(f=e*d),this.scrollHeight=Math.max(this.options.minScrollBarSize,f),this.viewportHeight=d;var g=this.viewportHeight+f-this.scrollHeight;this.relation=g/a,this.margin=this.options.margin+c.connector.topMargin(this.fakeScrollable)},handleDrag:function(a){var b=this,d=a.clientY;this.mousemoveHandler=function(a){b.incrementScroll(a.clientY-d),b.updateScroll(),d=a.clientY},c.connector.bindEvent(document,"mousemove",this.mousemoveHandler)},stopDrag:function(){this.mousemoveHandler&&c.connector.unbindEvent(document,"mousemove",this.mousemoveHandler),this.mouseupHandler&&c.connector.unbindEvent(document,"mouseup",this.mouseupHandler)},updateScroll:function(){var a=(this.currentPos-this.margin)/this.relation;this.realScrollable.scrollTop=a},setScrollbar:function(a){a=Math.max(this.margin,Math.min(this.viewportHeight-this.scrollHeight+this.margin,a)),this.currentPos=a,this.handlingArea.style.top=Math.round(a)+"px",this.handlingArea.style.display=this.relation>=1?"none":"block"},incrementScroll:function(a){this.setScrollbar(this.currentPos+a)},bindEvents:function(){var a=this;a.scrollHandler=function(){var b=a.margin+a.relation*a.realScrollable.scrollTop;a.setScrollbar(b)},a.mousedownHandler=function(b){c.connector.preventDefault(b),a.handleDrag(b),a.mouseupHandler=function(b){c.connector.preventDefault(b),a.stopDrag()},c.connector.bindEvent(document,"mouseup",a.mouseupHandler)},c.connector.bindEvent(this.realScrollable,"scroll",a.scrollHandler),c.connector.bindEvent(this.scrollBar,"mousedown",a.mousedownHandler)},clearEvents:function(){this.realScrollable&&this.scrollHandler&&c.connector.unbindEvent(this.realScrollable,"scroll",this.scrollHandler),this.scrollBar&&this.mousedownHandler&&c.connector.unbindEvent(this.scrollBar,"mousedown",this.mousedownHandler),this.stopDrag()}},a.MeowBar=c}(this),function(){var a=function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):a};MeowBar.connector={bindEvent:function(a,b,c){a.addEventListener(b,c,!1)},unbindEvent:function(a,b,c){a.removeEventListener(b,c,!1)},preventDefault:function(a){a.preventDefault()},elementHeight:function(b){var c=MeowBar.connector.topMargin(b),d=parseInt(a("borderBottomWidth"),10),e=parseInt(a("marginBottom"),10);return b.offsetHeight-(c+d+e)},topMargin:function(){return parseInt(a("borderTopWidth"),10)+parseInt(a("marginTop"),10)}}}(this);