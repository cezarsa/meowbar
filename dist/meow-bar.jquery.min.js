!function(a){var b=function(a,b){this.realScrollable=a,this.fakeScrollable=b,this.currentPos=0,this.initiated=!1,this.createElements(),this.bindEvents()};b.prototype={constructor:b,margin:5,createElements:function(){this.actualBarElement=document.createElement("div"),this.handlingArea=document.createElement("div"),this.handlingArea.appendChild(this.actualBarElement),this.scrollBar=document.createElement("div"),this.scrollBar.className="meow-bar",this.scrollBar.appendChild(this.handlingArea),this.fakeScrollable.appendChild(this.scrollBar)},refreshDimensions:function(){this.calculateDimensions(),this.handlingArea.style.height=Math.round(this.scrollHeight)+"px";var a=this.margin+this.relation*this.realScrollable.scrollTop;if(this.setScrollbar(a),!this.initiated){this.initiated=!0;var b=this;setTimeout(function(){b.scrollBar.className="meow-bar initiated"},0)}},calculateDimensions:function(){var a=this.realScrollable.scrollHeight,b=this.fakeScrollable.offsetHeight,c=b-2*this.margin,d=c/a,e=0;a>b&&(e=d*c),this.scrollHeight=e,this.viewportHeight=c,this.relation=d},handleDrag:function(a){var c=this,d=a.clientY;this.mousemoveHandler=function(a){c.incrementScroll(a.clientY-d),c.updateScroll(),d=a.clientY},b.connector.bindEvent(document,"mousemove",this.mousemoveHandler)},stopDrag:function(){this.mousemoveHandler&&b.connector.unbindEvent(document,"mousemove",this.mousemoveHandler),this.mouseupHandler&&b.connector.unbindEvent(document,"mouseup",this.mouseupHandler)},updateScroll:function(){var a=(this.currentPos-this.margin)/this.relation;this.realScrollable.scrollTop=a},setScrollbar:function(a){a=Math.max(this.margin,Math.min(this.viewportHeight-this.scrollHeight+this.margin,a)),this.currentPos=a,this.handlingArea.style.top=Math.round(a)+"px",this.handlingArea.style.display=this.relation>=1?"none":"block"},incrementScroll:function(a){this.setScrollbar(this.currentPos+a)},bindEvents:function(){var a=this;a.scrollHandler=function(){var b=a.margin+a.relation*a.realScrollable.scrollTop;a.setScrollbar(b)},a.mousedownHandler=function(c){b.connector.preventDefault(c),a.handleDrag(c),a.mouseupHandler=function(c){b.connector.preventDefault(c),a.stopDrag()},b.connector.bindEvent(document,"mouseup",a.mouseupHandler)},b.connector.bindEvent(this.realScrollable,"scroll",a.scrollHandler),b.connector.bindEvent(this.scrollBar,"mousedown",a.mousedownHandler)},clearEvents:function(){this.realScrollable&&this.scrollHandler&&b.connector.unbindEvent(this.realScrollable,"scroll",this.scrollHandler),this.scrollBar&&this.mousedownHandler&&b.connector.unbindEvent(this.scrollBar,"mousedown",this.mousedownHandler),this.stopDrag()}},a.MeowBar=b}(this),function(a,b){MeowBar.connector={bindEvent:function(a,c,d){b(a).on(c,d)},unbindEvent:function(a,c,d){b(a).off(c,d)},preventDefault:function(a){a.preventDefault()}}}(this,jQuery);